<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Convolutional Neural Networks - Interactive Lesson</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 0; }
.nav-header { background: #2d3748; padding: 15px 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.3); display: flex; justify-content: space-between; align-items: center; }
.nav-header a { color: #90cdf4; text-decoration: none; font-weight: 600; font-size: 1.1em; }
.nav-title { color: #fff; font-size: 1.2em; font-weight: 700; }
.container { max-width: 1400px; margin: 20px auto; background: #fff; border-radius: 15px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
h1 { text-align: center; color: #2d3748; font-size: 2.5em; margin-bottom: 20px; }
.intro { background: #e3f2fd; padding: 25px; border-radius: 10px; margin-bottom: 30px; line-height: 1.8; }
.intro h2 { color: #1976d2; margin-bottom: 15px; }
.content-section { margin: 30px 0; }
.content-section h3 { color: #2d3748; margin-bottom: 15px; font-size: 1.6em; }
.content-section p { line-height: 1.8; color: #4a5568; margin-bottom: 15px; }
.visual-demo { background: #f8f9fa; padding: 30px; border-radius: 10px; margin: 20px 0; text-align: center; }
canvas { border: 2px solid #ddd; border-radius: 8px; background: #fff; margin: 20px auto; display: block; }
.info-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0; }
.info-card { background: #f0f4f8; padding: 20px; border-radius: 10px; border-left: 4px solid #667eea; }
.info-card h4 { color: #667eea; margin-bottom: 10px; }
.info-card ul { margin-left: 20px; line-height: 1.8; color: #4a5568; }
.highlight { background: #fff9c4; padding: 20px; border-radius: 10px; border-left: 4px solid #fbc02d; margin: 20px 0; }
.highlight h4 { color: #f57c00; margin-bottom: 10px; }
.example-box { background: #e8f5e9; padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #4CAF50; }
.example-box h4 { color: #2e7d32; margin-bottom: 10px; }
.controls { text-align: center; margin: 20px 0; }
button { padding: 15px 30px; margin: 10px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 1.1em; background: #667eea; color: white; transition: all 0.3s; }
button:hover { background: #5568d3; transform: translateY(-2px); }
</style>
</head>
<body>
<nav class="nav-header">
    <div class="nav-title">üñºÔ∏è Convolutional Neural Networks</div>
    <a href="../../index.html">‚Üê Back to Home</a>
</nav>
<div class="container">
    <h1>üñºÔ∏è Convolutional Neural Networks (CNN)</h1>

    <div class="intro">
        <h2>What is a Convolutional Neural Network?</h2>
        <p>
            Convolutional Neural Networks (CNNs) are specialized neural networks designed for processing
            grid-like data, especially images. They use a mathematical operation called convolution to
            automatically learn spatial hierarchies of features‚Äîfrom simple edges to complex patterns.
            CNNs revolutionized computer vision and are behind facial recognition, self-driving cars, and
            medical image analysis.
        </p>
    </div>

    <div class="content-section">
        <h3>üìö Key Concepts</h3>
        <div class="info-grid">
            <div class="info-card">
                <h4>Architecture Layers</h4>
                <ul>
                    <li><strong>Convolutional Layer:</strong> Detects features using filters</li>
                    <li><strong>Pooling Layer:</strong> Reduces spatial dimensions</li>
                    <li><strong>Activation (ReLU):</strong> Adds non-linearity</li>
                    <li><strong>Fully Connected:</strong> Final classification</li>
                </ul>
            </div>

            <div class="info-card">
                <h4>How It Works</h4>
                <ul>
                    <li>Filters slide across the image (convolution)</li>
                    <li>Each filter detects specific features</li>
                    <li>Early layers find edges and textures</li>
                    <li>Deeper layers recognize complex patterns</li>
                </ul>
            </div>

            <div class="info-card">
                <h4>Key Operations</h4>
                <ul>
                    <li><strong>Convolution:</strong> Feature extraction</li>
                    <li><strong>Pooling:</strong> Downsampling (Max/Average)</li>
                    <li><strong>Stride:</strong> Filter movement step size</li>
                    <li><strong>Padding:</strong> Preserve spatial dimensions</li>
                </ul>
            </div>

            <div class="info-card">
                <h4>Applications</h4>
                <ul>
                    <li>Image classification and recognition</li>
                    <li>Object detection and segmentation</li>
                    <li>Face recognition and verification</li>
                    <li>Medical image diagnosis</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="visual-demo">
        <h3>üé® Interactive Convolution Visualization</h3>
        <p>Watch how a convolutional filter detects edges in an image</p>
        <canvas id="convCanvas" width="800" height="400"></canvas>
        <div class="controls">
            <button onclick="animateConvolution()">‚ñ∂Ô∏è Animate Convolution</button>
            <button onclick="changeFilter()">üîÑ Change Filter</button>
            <button onclick="reset()">‚Ü∫ Reset</button>
        </div>
        <p style="margin-top: 15px; color: #666;">
            The filter slides across the image, detecting features at each position
        </p>
    </div>

    <div class="highlight">
        <h4>üîë Key Insight</h4>
        <p>
            CNNs use <strong>parameter sharing</strong> and <strong>local connectivity</strong> to process images
            efficiently. Instead of connecting every pixel to every neuron (like feedforward networks), CNNs
            use small filters that detect local patterns. The same filter is reused across the entire image,
            dramatically reducing parameters while maintaining translation invariance‚Äîmeaning the network can
            recognize a cat whether it's in the top-left or bottom-right corner.
        </p>
    </div>

    <div class="example-box">
        <h4>üåü Real-World Example: Image Classification</h4>
        <p>
            When a CNN identifies a dog in a photo:<br><br>
            <strong>Layer 1 (Conv):</strong> 32 filters detect edges, corners, and basic textures<br>
            <strong>Layer 2 (Pool):</strong> Reduce image size by 2x, keep important features<br>
            <strong>Layer 3 (Conv):</strong> 64 filters combine edges into shapes (eyes, ears, nose)<br>
            <strong>Layer 4 (Pool):</strong> Further dimensionality reduction<br>
            <strong>Layer 5 (Conv):</strong> 128 filters recognize complex patterns (dog face, body)<br>
            <strong>Layer 6 (FC):</strong> Combines all features to classify: "Golden Retriever, 95% confidence"
        </p>
    </div>

    <div class="content-section">
        <h3>‚ö° How CNNs Process Images</h3>
        <p>
            <strong>1. Input:</strong> Raw pixel values (e.g., 224√ó224√ó3 RGB image)<br>
            <strong>2. Convolution:</strong> Apply filters to extract features at each position<br>
            <strong>3. Activation:</strong> Apply ReLU to introduce non-linearity<br>
            <strong>4. Pooling:</strong> Downsample to reduce spatial dimensions and computation<br>
            <strong>5. Repeat:</strong> Stack multiple conv-activation-pool blocks<br>
            <strong>6. Flatten:</strong> Convert 3D feature maps to 1D vector<br>
            <strong>7. Fully Connected:</strong> Standard neural network layers for classification<br>
            <strong>8. Softmax:</strong> Output probabilities for each class
        </p>
    </div>

    <div class="info-grid" style="margin-top: 30px;">
        <div class="example-box">
            <h4>‚úÖ Advantages</h4>
            <ul>
                <li>Automatically learns features from data</li>
                <li>Translation invariant (detects patterns anywhere)</li>
                <li>Parameter efficient through weight sharing</li>
                <li>Hierarchical feature learning</li>
                <li>State-of-the-art for image tasks</li>
            </ul>
        </div>

        <div class="highlight" style="background: #ffebee;">
            <h4>‚ö†Ô∏è Limitations</h4>
            <ul>
                <li>Requires large amounts of training data</li>
                <li>Computationally expensive to train</li>
                <li>Not rotation invariant by default</li>
                <li>Struggles with spatial relationships</li>
                <li>Can be fooled by adversarial examples</li>
            </ul>
        </div>
    </div>

    <div style="text-align: center; margin-top: 40px;">
        <a href="../../games/cnn/index.html" style="display: inline-block; background: #4CAF50; color: white; padding: 20px 40px; border-radius: 10px; text-decoration: none; font-weight: 700; font-size: 1.2em;">
            üéÆ Play the CNN Game ‚Üí
        </a>
    </div>
</div>

<script>
const canvas = document.getElementById('convCanvas');
const ctx = canvas.getContext('2d');

let animating = false;
let filterType = 0;
let animationPos = 0;

const filters = [
    { name: 'Vertical Edge', kernel: [[-1, 0, 1], [-1, 0, 1], [-1, 0, 1]] },
    { name: 'Horizontal Edge', kernel: [[-1, -1, -1], [0, 0, 0], [1, 1, 1]] },
    { name: 'Blur', kernel: [[1/9, 1/9, 1/9], [1/9, 1/9, 1/9], [1/9, 1/9, 1/9]] }
];

function drawVisualization() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw input image representation
    ctx.fillStyle = '#e0e0e0';
    ctx.fillRect(50, 50, 200, 200);

    // Draw some patterns on the "image"
    ctx.fillStyle = '#333';
    for (let i = 0; i < 8; i++) {
        ctx.fillRect(70 + i * 23, 50, 3, 200);
    }

    ctx.fillStyle = '#2d3748';
    ctx.font = '14px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('Input Image', 150, 270);

    // Draw filter
    const filterX = 300;
    const filterY = 100;
    const cellSize = 30;

    ctx.fillText('Filter (' + filters[filterType].name + ')', filterX + 45, filterY - 10);

    for (let i = 0; i < 3; i++) {
        for (let j = 0; j < 3; j++) {
            const value = filters[filterType].kernel[i][j];
            const intensity = Math.abs(value);
            ctx.fillStyle = value > 0 ? `rgba(76, 175, 80, ${intensity})` : `rgba(244, 67, 54, ${intensity})`;
            ctx.fillRect(filterX + j * cellSize, filterY + i * cellSize, cellSize - 2, cellSize - 2);

            ctx.fillStyle = '#2d3748';
            ctx.font = '12px Arial';
            ctx.fillText(value.toFixed(1), filterX + j * cellSize + cellSize/2, filterY + i * cellSize + cellSize/2 + 4);
        }
    }

    // Draw arrow
    ctx.strokeStyle = '#667eea';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(400, 150);
    ctx.lineTo(480, 150);
    ctx.stroke();

    // Arrow head
    ctx.beginPath();
    ctx.moveTo(475, 145);
    ctx.lineTo(480, 150);
    ctx.lineTo(475, 155);
    ctx.stroke();

    // Draw output feature map
    ctx.fillStyle = '#f0f4f8';
    ctx.fillRect(500, 50, 200, 200);

    // Show activation pattern
    if (animating) {
        const numBars = Math.min(8, Math.floor(animationPos / 10));
        ctx.fillStyle = '#667eea';
        for (let i = 0; i < numBars; i++) {
            ctx.fillRect(520 + i * 23, 50, 3, 200);
        }
    }

    ctx.fillStyle = '#2d3748';
    ctx.fillText('Feature Map', 600, 270);

    // Draw convolution position indicator
    if (animating) {
        ctx.strokeStyle = '#4CAF50';
        ctx.lineWidth = 3;
        ctx.strokeRect(70 + (animationPos % 6) * 30, 70 + Math.floor(animationPos / 6) * 30, 50, 50);
    }
}

function animateConvolution() {
    if (animating) return;
    animating = true;
    animationPos = 0;

    const interval = setInterval(() => {
        animationPos++;
        drawVisualization();

        if (animationPos >= 36) {
            animating = false;
            clearInterval(interval);
        }
    }, 100);
}

function changeFilter() {
    filterType = (filterType + 1) % filters.length;
    drawVisualization();
}

function reset() {
    animating = false;
    animationPos = 0;
    drawVisualization();
}

// Initial draw
drawVisualization();
</script>
</body>
</html>
