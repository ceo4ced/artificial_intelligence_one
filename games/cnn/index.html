<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Filter Detective - CNN Game</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 0; }
.nav-header { background: #2d3748; padding: 15px 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.3); display: flex; justify-content: space-between; align-items: center; }
.nav-header a { color: #90cdf4; text-decoration: none; font-weight: 600; font-size: 1.1em; }
.nav-title { color: #fff; font-size: 1.2em; font-weight: 700; }
.container { max-width: 1400px; margin: 20px auto; background: #fff; border-radius: 15px; padding: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
h1 { text-align: center; color: #2d3748; font-size: 2.5em; margin-bottom: 10px; }
.subtitle { text-align: center; color: #666; margin-bottom: 30px; font-size: 1.1em; }
.game-area { display: grid; grid-template-columns: 350px 1fr; gap: 30px; }
.sidebar { background: #f8f9fa; padding: 20px; border-radius: 10px; height: fit-content; }
button { width: 100%; padding: 12px; margin: 5px 0; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
.btn-primary { background: #4CAF50; color: #fff; }
.btn-primary:hover { background: #45a049; }
.btn-secondary { background: #2196F3; color: #fff; }
.btn-secondary:hover { background: #0b7dda; }
.btn-danger { background: #f44336; color: #fff; }
.btn-danger:hover { background: #da190b; }
canvas { border: 2px solid #ddd; border-radius: 8px; display: block; background: #fafafa; margin: 0 auto; cursor: pointer; }
.stats { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; padding: 15px; border-radius: 10px; margin-top: 15px; }
.stat-row { display: flex; justify-content: space-between; margin: 8px 0; }
.challenge { background: #fff9c4; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #fbc02d; }
.challenge h4 { color: #f57c00; margin-bottom: 8px; }
.info { background: #e3f2fd; padding: 15px; border-radius: 8px; margin: 15px 0; }
.info h4 { color: #1976d2; margin-bottom: 8px; }
.score { text-align: center; font-size: 2em; font-weight: bold; color: #4CAF50; margin: 15px 0; }
.filter-options { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 15px 0; }
.filter-btn { padding: 15px; border: 2px solid #667eea; background: #fff; color: #667eea; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
.filter-btn:hover { background: #667eea; color: #fff; }
.filter-btn.selected { background: #667eea; color: #fff; }
.timer { font-size: 1.5em; text-align: center; color: #f57c00; margin: 10px 0; font-weight: bold; }
</style>
</head>
<body>
<nav class="nav-header">
    <div class="nav-title">üîç Filter Detective Game</div>
    <a href="../../index.html">‚Üê Back to Home</a>
</nav>
<div class="container">
    <h1>üîç Filter Detective</h1>
    <p class="subtitle">Match the right convolutional filter to detect features in images!</p>

    <div class="game-area">
        <div class="sidebar">
            <h3>üéÆ Game Controls</h3>

            <div class="challenge">
                <h4>üéØ Challenge:</h4>
                <p id="challengeText" style="font-size: 0.9em;">Click "Start Game" to begin!</p>
            </div>

            <div class="timer" id="timer">Time: 60s</div>

            <h4 style="margin: 15px 0;">Select Filter:</h4>
            <div class="filter-options" id="filterOptions">
                <button class="filter-btn" onclick="selectFilter('vertical')">Vertical Edge</button>
                <button class="filter-btn" onclick="selectFilter('horizontal')">Horizontal Edge</button>
                <button class="filter-btn" onclick="selectFilter('blur')">Blur</button>
                <button class="filter-btn" onclick="selectFilter('sharpen')">Sharpen</button>
            </div>

            <button class="btn-primary" onclick="startGame()">üöÄ Start Game</button>
            <button class="btn-secondary" onclick="checkAnswer()">‚úÖ Check Answer</button>
            <button class="btn-danger" onclick="reset()">üîÑ Reset</button>

            <div class="stats">
                <div class="stat-row"><span>Correct:</span><span id="correct">0</span></div>
                <div class="stat-row"><span>Wrong:</span><span id="wrong">0</span></div>
                <div class="stat-row"><span>Accuracy:</span><span id="accuracy">0%</span></div>
                <div class="stat-row"><span>Streak:</span><span id="streak">0</span></div>
            </div>

            <div class="score">
                <div style="font-size: 0.6em; color: #666;">Score</div>
                <div id="score">0</div>
            </div>

            <div class="info">
                <h4>üí° How to Play:</h4>
                <p style="font-size: 0.9em; line-height: 1.6;">
                    1. Click "Start Game"<br>
                    2. Look at the image pattern<br>
                    3. Select the filter that would detect it<br>
                    4. Click "Check Answer"<br><br>
                    <strong>+10 points</strong> per correct answer<br>
                    <strong>+5 bonus</strong> for streak ‚â• 3!
                </p>
            </div>
        </div>

        <div>
            <canvas id="canvas" width="800" height="600"></canvas>
            <div style="text-align: center; margin-top: 20px;">
                <p style="color: #666; font-size: 0.9em;" id="feedback">
                    Select a filter and check your answer!
                </p>
            </div>
        </div>
    </div>
</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

let gameActive = false;
let currentPattern = null;
let selectedFilter = null;
let score = 0;
let correct = 0;
let wrong = 0;
let streak = 0;
let timeLeft = 60;
let timerInterval = null;

const patterns = [
    { type: 'vertical', name: 'Vertical Lines', filter: 'vertical' },
    { type: 'horizontal', name: 'Horizontal Lines', filter: 'horizontal' },
    { type: 'diagonal', name: 'Diagonal Lines', filter: 'vertical' },
    { type: 'checkerboard', name: 'Checkerboard', filter: 'sharpen' },
    { type: 'noise', name: 'Noisy Image', filter: 'blur' },
    { type: 'grid', name: 'Grid Pattern', filter: 'sharpen' }
];

function drawPattern(pattern) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = '#f0f0f0';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const size = 300;

    switch(pattern.type) {
        case 'vertical':
            ctx.fillStyle = '#333';
            for (let i = 0; i < 10; i++) {
                ctx.fillRect(centerX - size/2 + i * 30, centerY - size/2, 15, size);
            }
            break;

        case 'horizontal':
            ctx.fillStyle = '#333';
            for (let i = 0; i < 10; i++) {
                ctx.fillRect(centerX - size/2, centerY - size/2 + i * 30, size, 15);
            }
            break;

        case 'diagonal':
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 15;
            for (let i = 0; i < 8; i++) {
                ctx.beginPath();
                ctx.moveTo(centerX - size/2 + i * 40, centerY - size/2);
                ctx.lineTo(centerX - size/2 + i * 40 + size, centerY + size/2);
                ctx.stroke();
            }
            break;

        case 'checkerboard':
            const cellSize = 30;
            for (let i = 0; i < 10; i++) {
                for (let j = 0; j < 10; j++) {
                    if ((i + j) % 2 === 0) {
                        ctx.fillStyle = '#333';
                        ctx.fillRect(centerX - size/2 + i * cellSize, centerY - size/2 + j * cellSize, cellSize, cellSize);
                    }
                }
            }
            break;

        case 'noise':
            for (let i = 0; i < 5000; i++) {
                const x = centerX - size/2 + Math.random() * size;
                const y = centerY - size/2 + Math.random() * size;
                const brightness = Math.random() * 255;
                ctx.fillStyle = `rgb(${brightness}, ${brightness}, ${brightness})`;
                ctx.fillRect(x, y, 2, 2);
            }
            break;

        case 'grid':
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            for (let i = 0; i <= 10; i++) {
                ctx.beginPath();
                ctx.moveTo(centerX - size/2 + i * 30, centerY - size/2);
                ctx.lineTo(centerX - size/2 + i * 30, centerY + size/2);
                ctx.stroke();

                ctx.beginPath();
                ctx.moveTo(centerX - size/2, centerY - size/2 + i * 30);
                ctx.lineTo(centerX + size/2, centerY - size/2 + i * 30);
                ctx.stroke();
            }
            break;
    }

    // Draw pattern name
    ctx.fillStyle = '#2d3748';
    ctx.font = 'bold 24px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('Pattern: ' + pattern.name, canvas.width / 2, 50);

    ctx.font = '18px Arial';
    ctx.fillText('Which filter would best detect this pattern?', canvas.width / 2, 560);
}

function selectFilter(filter) {
    selectedFilter = filter;
    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('selected'));
    event.target.classList.add('selected');
}

function startGame() {
    if (gameActive) return;

    gameActive = true;
    timeLeft = 60;
    nextPattern();

    timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').textContent = `Time: ${timeLeft}s`;

        if (timeLeft <= 0) {
            endGame();
        }
    }, 1000);
}

function nextPattern() {
    currentPattern = patterns[Math.floor(Math.random() * patterns.length)];
    drawPattern(currentPattern);
    selectedFilter = null;
    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('selected'));
    document.getElementById('challengeText').textContent = 'Select the best filter for this pattern!';
    document.getElementById('feedback').textContent = 'Select a filter and check your answer!';
    document.getElementById('feedback').style.color = '#666';
}

function checkAnswer() {
    if (!gameActive || !selectedFilter) {
        alert('Please start the game and select a filter!');
        return;
    }

    const isCorrect = selectedFilter === currentPattern.filter;

    if (isCorrect) {
        correct++;
        streak++;
        const points = 10 + (streak >= 3 ? 5 : 0);
        score += points;
        document.getElementById('feedback').textContent = `‚úÖ Correct! +${points} points`;
        document.getElementById('feedback').style.color = '#4CAF50';
    } else {
        wrong++;
        streak = 0;
        document.getElementById('feedback').textContent = `‚ùå Wrong! The correct filter was: ${currentPattern.filter}`;
        document.getElementById('feedback').style.color = '#f44336';
    }

    updateStats();

    setTimeout(() => {
        if (gameActive) {
            nextPattern();
        }
    }, 1500);
}

function updateStats() {
    document.getElementById('correct').textContent = correct;
    document.getElementById('wrong').textContent = wrong;
    const total = correct + wrong;
    document.getElementById('accuracy').textContent = total > 0 ? Math.round((correct / total) * 100) + '%' : '0%';
    document.getElementById('streak').textContent = streak;
    document.getElementById('score').textContent = score;
}

function endGame() {
    gameActive = false;
    clearInterval(timerInterval);
    alert(`‚è±Ô∏è Time's Up!\n\nFinal Score: ${score}\nCorrect: ${correct}\nWrong: ${wrong}\nAccuracy: ${Math.round((correct / (correct + wrong)) * 100)}%`);
}

function reset() {
    gameActive = false;
    clearInterval(timerInterval);
    currentPattern = null;
    selectedFilter = null;
    score = 0;
    correct = 0;
    wrong = 0;
    streak = 0;
    timeLeft = 60;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = '#f0f0f0';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = '#666';
    ctx.font = '24px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('Click "Start Game" to begin!', canvas.width / 2, canvas.height / 2);

    document.getElementById('challengeText').textContent = 'Click "Start Game" to begin!';
    document.getElementById('timer').textContent = 'Time: 60s';
    document.getElementById('feedback').textContent = 'Select a filter and check your answer!';
    document.getElementById('feedback').style.color = '#666';

    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('selected'));

    updateStats();
}

// Initialize
reset();
</script>
</body>
</html>
