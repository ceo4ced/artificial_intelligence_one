<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Convolutional Neural Networks Quiz</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 0; }
.nav-header { background: #2d3748; padding: 15px 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.3); display: flex; justify-content: space-between; align-items: center; }
.nav-header a { color: #90cdf4; text-decoration: none; font-weight: 600; font-size: 1.1em; }
.nav-title { color: #fff; font-size: 1.2em; font-weight: 700; }
.container { max-width: 900px; margin: 20px auto; background: #fff; border-radius: 15px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
h1 { text-align: center; color: #2d3748; font-size: 2.5em; margin-bottom: 15px; }
.subtitle { text-align: center; color: #666; margin-bottom: 30px; font-size: 1.1em; }
.question-card { background: #f8f9fa; padding: 25px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #667eea; }
.question-card.answered-correct { border-left-color: #4CAF50; background: #f1f8f4; }
.question-card.answered-wrong { border-left-color: #f44336; background: #ffebee; }
.question-number { color: #667eea; font-weight: 600; margin-bottom: 10px; }
.question-text { font-size: 1.2em; color: #2d3748; margin-bottom: 20px; line-height: 1.6; }
.options { display: flex; flex-direction: column; gap: 12px; }
.option { background: #fff; padding: 15px 20px; border-radius: 8px; border: 2px solid #e0e0e0; cursor: pointer; transition: all 0.3s; }
.option:hover { border-color: #667eea; transform: translateX(5px); }
.option.selected { border-color: #667eea; background: #e3f2fd; }
.option.correct { border-color: #4CAF50; background: #c8e6c9; }
.option.wrong { border-color: #f44336; background: #ffcdd2; }
.option.disabled { cursor: not-allowed; opacity: 0.7; }
.explanation { margin-top: 15px; padding: 15px; background: #fff9c4; border-radius: 6px; border-left: 3px solid #fbc02d; display: none; }
.explanation.show { display: block; }
.explanation strong { color: #f57c00; }
.progress-bar { background: #e0e0e0; height: 10px; border-radius: 5px; margin: 20px 0; overflow: hidden; }
.progress-fill { background: linear-gradient(90deg, #667eea, #764ba2); height: 100%; transition: width 0.3s; }
.quiz-actions { display: flex; gap: 15px; justify-content: center; margin: 30px 0; }
button { padding: 15px 30px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 1.05em; transition: all 0.3s; }
.btn-primary { background: #4CAF50; color: #fff; }
.btn-primary:hover { background: #45a049; transform: scale(1.05); }
.btn-primary:disabled { background: #ccc; cursor: not-allowed; transform: none; }
.btn-secondary { background: #2196F3; color: #fff; }
.btn-secondary:hover { background: #1976d2; }
.results-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; padding: 40px; border-radius: 15px; text-align: center; margin: 30px 0; }
.results-card h2 { font-size: 2.5em; margin-bottom: 20px; }
.score-display { font-size: 4em; font-weight: bold; margin: 20px 0; }
.results-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin: 30px 0; }
.result-stat { background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; }
.result-stat-value { font-size: 2em; font-weight: bold; }
.result-stat-label { margin-top: 8px; opacity: 0.9; }
</style>
</head>
<body>
<nav class="nav-header">
    <div class="nav-title">Convolutional Neural Networks Quiz</div>
    <div>
        <a href="../../lessons/cnn/index.html" style="margin-right: 20px;">View Lesson</a>
        <a href="../index.html">Back to Quizzes</a>
    </div>
</nav>
<div class="container">
    <h1>Convolutional Neural Networks Quiz</h1>
    <p class="subtitle">Test your understanding of CNNs, convolution, pooling, and image processing</p>

    <div class="progress-bar">
        <div class="progress-fill" id="progressBar" style="width: 0%"></div>
    </div>

    <div id="quizContent"></div>

    <div class="quiz-actions" id="quizActions">
        <button class="btn-primary" id="submitBtn" onclick="submitQuiz()" disabled>Submit Quiz</button>
        <button class="btn-secondary" onclick="retakeQuiz()">Retake Quiz</button>
    </div>
</div>

<script>
const quizData = {
    id: 'cnn',
    questions: [
        {
            question: "What is a convolutional neural network (CNN)?",
            options: [
                "A network for conversations",
                "A specialized neural network designed for processing grid-like data such as images",
                "A network that only works with text",
                "A traditional feedforward network"
            ],
            correct: 1,
            explanation: "CNNs are specialized neural networks designed to process grid-like data, especially images. They use convolution operations to automatically detect features like edges, textures, and patterns."
        },
        {
            question: "What is a convolution operation in CNNs?",
            options: [
                "Converting images to text",
                "Sliding a filter over input data to detect features",
                "Deleting pixels from an image",
                "Rotating an image"
            ],
            correct: 1,
            explanation: "Convolution is a mathematical operation where a filter (kernel) slides across the input data, performing element-wise multiplication and summing the results to detect specific features."
        },
        {
            question: "What is a filter (or kernel) in a CNN?",
            options: [
                "A coffee filter for data",
                "A small matrix of weights that detects specific features in the input",
                "A tool to remove bad data",
                "The final output layer"
            ],
            correct: 1,
            explanation: "A filter (kernel) is a small matrix of learnable weights that slides over the input to detect specific features like edges, corners, or textures through the convolution operation."
        },
        {
            question: "What is a feature map?",
            options: [
                "A map showing where features are located",
                "The output produced when a filter is applied to an input through convolution",
                "A list of all features in the network",
                "A geographic map"
            ],
            correct: 1,
            explanation: "A feature map is the output activation produced when a convolutional filter is applied to the input. It highlights where the filter's detected features appear in the input."
        },
        {
            question: "What is the purpose of pooling layers in CNNs?",
            options: [
                "To add water to the network",
                "To reduce spatial dimensions while retaining important information",
                "To increase image size",
                "To change image colors"
            ],
            correct: 1,
            explanation: "Pooling layers reduce the spatial dimensions (width and height) of feature maps, decreasing computational cost and parameters while keeping the most important information through operations like max pooling."
        },
        {
            question: "What is max pooling?",
            options: [
                "Finding the maximum swimming pool",
                "Taking the maximum value from each region to downsample feature maps",
                "Adding all values together",
                "Removing the maximum values"
            ],
            correct: 1,
            explanation: "Max pooling is a downsampling operation that divides the feature map into regions and takes the maximum value from each region, reducing dimensionality while preserving the strongest activations."
        },
        {
            question: "Why are CNNs particularly effective for image processing?",
            options: [
                "They are faster than other algorithms",
                "They automatically learn hierarchical features and are translation-invariant",
                "They work only with black and white images",
                "They don't need training"
            ],
            correct: 1,
            explanation: "CNNs excel at image processing because they automatically learn hierarchical features (edges → textures → objects) and exhibit translation invariance (can detect features regardless of position)."
        },
        {
            question: "What does 'translation invariance' mean in CNNs?",
            options: [
                "The network can translate between languages",
                "The network can recognize features regardless of their position in the image",
                "The network can move images around",
                "The network works in different countries"
            ],
            correct: 1,
            explanation: "Translation invariance means the network can recognize features (like a cat's face) regardless of where they appear in the image, thanks to the sliding window nature of convolution and pooling."
        },
        {
            question: "What type of features do early layers in a CNN typically learn?",
            options: [
                "Complex objects and scenes",
                "Simple features like edges, corners, and basic shapes",
                "Text and numbers only",
                "Color information only"
            ],
            correct: 1,
            explanation: "Early layers in CNNs learn simple, low-level features like edges, corners, and basic shapes. These simple features are combined in deeper layers to form more complex patterns and objects."
        },
        {
            question: "What happens to features as they move through deeper layers of a CNN?",
            options: [
                "They get deleted",
                "They become more abstract and complex, representing higher-level concepts",
                "They stay the same",
                "They become simpler"
            ],
            correct: 1,
            explanation: "As information flows through deeper layers, CNNs combine simple features into increasingly complex and abstract representations, from edges to textures to parts to complete objects."
        },
        {
            question: "Which application is well-suited for CNNs?",
            options: [
                "Text-only processing",
                "Image classification, object detection, and facial recognition",
                "Playing music",
                "Basic arithmetic"
            ],
            correct: 1,
            explanation: "CNNs excel at visual tasks including image classification (identifying what's in an image), object detection (finding and locating objects), and facial recognition."
        },
        {
            question: "What is the main advantage of parameter sharing in CNNs?",
            options: [
                "Networks can share files with each other",
                "The same filter weights are used across the entire image, reducing parameters needed",
                "Multiple people can use the network at once",
                "The network becomes slower"
            ],
            correct: 1,
            explanation: "Parameter sharing in CNNs means the same filter weights are applied across the entire input, dramatically reducing the number of parameters compared to fully connected layers while enabling feature detection everywhere."
        }
    ]
};

let userAnswers = [];
let submitted = false;

function init() {
    loadQuiz();
    loadProgress();
}

function loadQuiz() {
    const content = document.getElementById('quizContent');
    content.innerHTML = quizData.questions.map((q, index) => `
        <div class="question-card" id="question${index}">
            <div class="question-number">Question ${index + 1} of ${quizData.questions.length}</div>
            <div class="question-text">${q.question}</div>
            <div class="options">
                ${q.options.map((option, optIndex) => `
                    <div class="option" onclick="selectOption(${index}, ${optIndex})" id="q${index}_opt${optIndex}">
                        ${option}
                    </div>
                `).join('')}
            </div>
            <div class="explanation" id="explanation${index}">
                <strong>Explanation:</strong> ${q.explanation}
            </div>
        </div>
    `).join('');
}

function selectOption(questionIndex, optionIndex) {
    if (submitted) return;

    // Clear previous selection
    for (let i = 0; i < quizData.questions[questionIndex].options.length; i++) {
        document.getElementById(`q${questionIndex}_opt${i}`).classList.remove('selected');
    }

    // Mark new selection
    document.getElementById(`q${questionIndex}_opt${optionIndex}`).classList.add('selected');
    userAnswers[questionIndex] = optionIndex;

    updateProgress();
    checkSubmitEnabled();
}

function checkSubmitEnabled() {
    const allAnswered = userAnswers.length === quizData.questions.length &&
                       userAnswers.every(a => a !== undefined);
    document.getElementById('submitBtn').disabled = !allAnswered;
}

function updateProgress() {
    const progress = (userAnswers.filter(a => a !== undefined).length / quizData.questions.length) * 100;
    document.getElementById('progressBar').style.width = progress + '%';
}

function submitQuiz() {
    if (submitted) return;
    submitted = true;

    let correct = 0;

    quizData.questions.forEach((q, index) => {
        const questionCard = document.getElementById(`question${index}`);
        const userAnswer = userAnswers[index];
        const isCorrect = userAnswer === q.correct;

        if (isCorrect) {
            correct++;
            questionCard.classList.add('answered-correct');
        } else {
            questionCard.classList.add('answered-wrong');
        }

        // Show correct/wrong on options
        q.options.forEach((_, optIndex) => {
            const optEl = document.getElementById(`q${index}_opt${optIndex}`);
            optEl.classList.add('disabled');

            if (optIndex === q.correct) {
                optEl.classList.add('correct');
            } else if (optIndex === userAnswer && !isCorrect) {
                optEl.classList.add('wrong');
            }
        });

        // Show explanation
        document.getElementById(`explanation${index}`).classList.add('show');
    });

    const percentage = Math.round((correct / quizData.questions.length) * 100);

    // Save result
    const result = {
        score: correct,
        total: quizData.questions.length,
        percentage: percentage,
        date: new Date().toISOString()
    };
    localStorage.setItem(`quiz_${quizData.id}`, JSON.stringify(result));

    // Show results
    showResults(correct, percentage);
}

function showResults(correct, percentage) {
    const content = document.getElementById('quizContent');
    let message = '';
    if (percentage >= 90) message = 'Excellent! You have mastered convolutional neural networks!';
    else if (percentage >= 70) message = 'Great job! You understand the key concepts!';
    else if (percentage >= 50) message = 'Good effort! Review the lesson to improve!';
    else message = 'Keep learning! Review the lesson and try again!';

    content.innerHTML = `
        <div class="results-card">
            <h2>Quiz Complete!</h2>
            <div class="score-display">${percentage}%</div>
            <p style="font-size: 1.3em; margin: 20px 0;">${message}</p>
            <div class="results-grid">
                <div class="result-stat">
                    <div class="result-stat-value">${correct}</div>
                    <div class="result-stat-label">Correct</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value">${quizData.questions.length - correct}</div>
                    <div class="result-stat-label">Incorrect</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value">${correct * 10}</div>
                    <div class="result-stat-label">Points Earned</div>
                </div>
            </div>
        </div>
    ` + content.innerHTML;

    document.getElementById('submitBtn').style.display = 'none';
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

function retakeQuiz() {
    if (confirm('Retake the quiz? Your previous score will be replaced.')) {
        userAnswers = [];
        submitted = false;
        document.getElementById('submitBtn').style.display = 'inline-block';
        init();
        updateProgress();
    }
}

function loadProgress() {
    // Could load previous answers here if needed
}

// Initialize
init();
</script>
</body>
</html>
