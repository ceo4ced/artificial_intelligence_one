<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data Cleaning Quiz</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 0; }
.nav-header { background: #2d3748; padding: 15px 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.3); display: flex; justify-content: space-between; align-items: center; }
.nav-header a { color: #90cdf4; text-decoration: none; font-weight: 600; font-size: 1.1em; }
.nav-title { color: #fff; font-size: 1.2em; font-weight: 700; }
.container { max-width: 900px; margin: 20px auto; background: #fff; border-radius: 15px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
h1 { text-align: center; color: #2d3748; font-size: 2.5em; margin-bottom: 15px; }
.subtitle { text-align: center; color: #666; margin-bottom: 30px; font-size: 1.1em; }
.question-card { background: #f8f9fa; padding: 25px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #667eea; }
.question-card.answered-correct { border-left-color: #4CAF50; background: #f1f8f4; }
.question-card.answered-wrong { border-left-color: #f44336; background: #ffebee; }
.question-number { color: #667eea; font-weight: 600; margin-bottom: 10px; }
.question-text { font-size: 1.2em; color: #2d3748; margin-bottom: 20px; line-height: 1.6; }
.options { display: flex; flex-direction: column; gap: 12px; }
.option { background: #fff; padding: 15px 20px; border-radius: 8px; border: 2px solid #e0e0e0; cursor: pointer; transition: all 0.3s; }
.option:hover { border-color: #667eea; transform: translateX(5px); }
.option.selected { border-color: #667eea; background: #e3f2fd; }
.option.correct { border-color: #4CAF50; background: #c8e6c9; }
.option.wrong { border-color: #f44336; background: #ffcdd2; }
.option.disabled { cursor: not-allowed; opacity: 0.7; }
.explanation { margin-top: 15px; padding: 15px; background: #fff9c4; border-radius: 6px; border-left: 3px solid #fbc02d; display: none; }
.explanation.show { display: block; }
.explanation strong { color: #f57c00; }
.progress-bar { background: #e0e0e0; height: 10px; border-radius: 5px; margin: 20px 0; overflow: hidden; }
.progress-fill { background: linear-gradient(90deg, #667eea, #764ba2); height: 100%; transition: width 0.3s; }
.quiz-actions { display: flex; gap: 15px; justify-content: center; margin: 30px 0; }
button { padding: 15px 30px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 1.05em; transition: all 0.3s; }
.btn-primary { background: #4CAF50; color: #fff; }
.btn-primary:hover { background: #45a049; transform: scale(1.05); }
.btn-primary:disabled { background: #ccc; cursor: not-allowed; transform: none; }
.btn-secondary { background: #2196F3; color: #fff; }
.btn-secondary:hover { background: #1976d2; }
.results-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; padding: 40px; border-radius: 15px; text-align: center; margin: 30px 0; }
.results-card h2 { font-size: 2.5em; margin-bottom: 20px; }
.score-display { font-size: 4em; font-weight: bold; margin: 20px 0; }
.results-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin: 30px 0; }
.result-stat { background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; }
.result-stat-value { font-size: 2em; font-weight: bold; }
.result-stat-label { margin-top: 8px; opacity: 0.9; }
</style>
</head>
<body>
<nav class="nav-header">
    <div class="nav-title">üìù Data Cleaning Quiz</div>
    <div>
        <a href="../../lessons/data-cleaning/index.html" style="margin-right: 20px;">üìö View Lesson</a>
        <a href="../index.html">‚Üê Back to Quizzes</a>
    </div>
</nav>
<div class="container">
    <h1>Data Cleaning Quiz</h1>
    <p class="subtitle">Test your understanding of data quality, errors, and outliers</p>

    <div class="progress-bar">
        <div class="progress-fill" id="progressBar" style="width: 0%"></div>
    </div>

    <div id="quizContent"></div>

    <div class="quiz-actions" id="quizActions">
        <button class="btn-primary" id="submitBtn" onclick="submitQuiz()" disabled>Submit Quiz</button>
        <button class="btn-secondary" onclick="retakeQuiz()">Retake Quiz</button>
    </div>
</div>

<script>
const quizData = {
    id: 'data-cleaning',
    questions: [
        {
            question: "What is data cleaning?",
            options: [
                "Deleting all old data",
                "Identifying and fixing errors, inconsistencies, and missing values in data",
                "Organizing files on your computer",
                "Making data look pretty"
            ],
            correct: 1,
            explanation: "Data cleaning involves identifying and correcting errors, handling missing values, removing duplicates, and standardizing formats to improve data quality."
        },
        {
            question: "What are missing values in a dataset?",
            options: [
                "Data that was stolen",
                "Fields where no data was recorded or is unavailable",
                "Incorrect data",
                "Data from the future"
            ],
            correct: 1,
            explanation: "Missing values are empty fields where data wasn't collected, was lost, or is unavailable. They need special handling as they can affect analysis."
        },
        {
            question: "What is a duplicate record?",
            options: [
                "A copy of the dataset",
                "The same data entry appearing multiple times",
                "Similar but different records",
                "Backup data"
            ],
            correct: 1,
            explanation: "Duplicate records are exact or near-exact copies of the same entry appearing multiple times, which can skew analysis and should usually be removed."
        },
        {
            question: "Why is data cleaning important?",
            options: [
                "It makes databases smaller",
                "Clean data leads to accurate analysis and reliable insights",
                "It's required by law",
                "It makes data colorful"
            ],
            correct: 1,
            explanation: "Clean data is essential for accurate analysis. Garbage in, garbage out - poor quality data leads to unreliable conclusions and bad decisions."
        },
        {
            question: "What is data standardization?",
            options: [
                "Making all data the same value",
                "Ensuring data follows consistent formats and conventions",
                "Converting all data to numbers",
                "Removing all special characters"
            ],
            correct: 1,
            explanation: "Standardization ensures consistent formats (like date formats, capitalization, units) so data can be properly compared and analyzed."
        },
        {
            question: "How should you handle outliers?",
            options: [
                "Always delete them immediately",
                "Investigate to determine if they're errors or legitimate extreme values",
                "Always keep them",
                "Ignore them"
            ],
            correct: 1,
            explanation: "Outliers might be data errors OR important extreme cases. Investigate first - some outliers reveal critical insights, others are mistakes that need correction."
        },
        {
            question: "What is data validation?",
            options: [
                "Approving all data",
                "Checking if data meets quality criteria and is logically consistent",
                "Making data valid for one year",
                "Deleting invalid data"
            ],
            correct: 1,
            explanation: "Data validation checks if data meets expected criteria (right format, reasonable ranges, logical consistency) to catch errors early."
        },
        {
            question: "Why might you fill in missing values instead of deleting rows?",
            options: [
                "It's easier",
                "To preserve valuable data in other columns and maintain sample size",
                "Missing data is always wrong",
                "To make the dataset bigger"
            ],
            correct: 1,
            explanation: "Deleting entire rows with missing values can lose valuable information in other columns and reduce sample size. Filling (imputation) preserves other data."
        }
    ]
};

let userAnswers = [];
let submitted = false;

function init() {
    loadQuiz();
    loadProgress();
}

function loadQuiz() {
    const content = document.getElementById('quizContent');
    content.innerHTML = quizData.questions.map((q, index) => `
        <div class="question-card" id="question${index}">
            <div class="question-number">Question ${index + 1} of ${quizData.questions.length}</div>
            <div class="question-text">${q.question}</div>
            <div class="options">
                ${q.options.map((option, optIndex) => `
                    <div class="option" onclick="selectOption(${index}, ${optIndex})" id="q${index}_opt${optIndex}">
                        ${option}
                    </div>
                `).join('')}
            </div>
            <div class="explanation" id="explanation${index}">
                <strong>Explanation:</strong> ${q.explanation}
            </div>
        </div>
    `).join('');
}

function selectOption(questionIndex, optionIndex) {
    if (submitted) return;

    // Clear previous selection
    for (let i = 0; i < quizData.questions[questionIndex].options.length; i++) {
        document.getElementById(`q${questionIndex}_opt${i}`).classList.remove('selected');
    }

    // Mark new selection
    document.getElementById(`q${questionIndex}_opt${optionIndex}`).classList.add('selected');
    userAnswers[questionIndex] = optionIndex;

    updateProgress();
    checkSubmitEnabled();
}

function checkSubmitEnabled() {
    const allAnswered = userAnswers.length === quizData.questions.length &&
                       userAnswers.every(a => a !== undefined);
    document.getElementById('submitBtn').disabled = !allAnswered;
}

function updateProgress() {
    const progress = (userAnswers.filter(a => a !== undefined).length / quizData.questions.length) * 100;
    document.getElementById('progressBar').style.width = progress + '%';
}

function submitQuiz() {
    if (submitted) return;
    submitted = true;

    let correct = 0;

    quizData.questions.forEach((q, index) => {
        const questionCard = document.getElementById(`question${index}`);
        const userAnswer = userAnswers[index];
        const isCorrect = userAnswer === q.correct;

        if (isCorrect) {
            correct++;
            questionCard.classList.add('answered-correct');
        } else {
            questionCard.classList.add('answered-wrong');
        }

        // Show correct/wrong on options
        q.options.forEach((_, optIndex) => {
            const optEl = document.getElementById(`q${index}_opt${optIndex}`);
            optEl.classList.add('disabled');

            if (optIndex === q.correct) {
                optEl.classList.add('correct');
            } else if (optIndex === userAnswer && !isCorrect) {
                optEl.classList.add('wrong');
            }
        });

        // Show explanation
        document.getElementById(`explanation${index}`).classList.add('show');
    });

    const percentage = Math.round((correct / quizData.questions.length) * 100);

    // Save result
    const result = {
        score: correct,
        total: quizData.questions.length,
        percentage: percentage,
        date: new Date().toISOString()
    };
    localStorage.setItem(`quiz_${quizData.id}`, JSON.stringify(result));

    // Show results
    showResults(correct, percentage);
}

function showResults(correct, percentage) {
    const content = document.getElementById('quizContent');
    let message = '';
    if (percentage >= 90) message = 'üéâ Excellent! You have mastered this topic!';
    else if (percentage >= 70) message = '‚ú® Great job! You understand the key concepts!';
    else if (percentage >= 50) message = 'üëç Good effort! Review the lesson to improve!';
    else message = 'üí™ Keep learning! Review the lesson and try again!';

    content.innerHTML = `
        <div class="results-card">
            <h2>Quiz Complete!</h2>
            <div class="score-display">${percentage}%</div>
            <p style="font-size: 1.3em; margin: 20px 0;">${message}</p>
            <div class="results-grid">
                <div class="result-stat">
                    <div class="result-stat-value">${correct}</div>
                    <div class="result-stat-label">Correct</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value">${quizData.questions.length - correct}</div>
                    <div class="result-stat-label">Incorrect</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value">${correct * 10}</div>
                    <div class="result-stat-label">Points Earned</div>
                </div>
            </div>
        </div>
    ` + content.innerHTML;

    document.getElementById('submitBtn').style.display = 'none';
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

function retakeQuiz() {
    if (confirm('Retake the quiz? Your previous score will be replaced.')) {
        userAnswers = [];
        submitted = false;
        document.getElementById('submitBtn').style.display = 'inline-block';
        init();
        updateProgress();
    }
}

function loadProgress() {
    // Could load previous answers here if needed
}

// Initialize
init();
</script>
</body>
</html>
